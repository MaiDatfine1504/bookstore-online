{% extends "layouts/base.html" %}

{% block content %}
<div class="checkout-container">
    <h2>Thanh Toán</h2>
    {% if cart %}
        <form action="{{ url_for('checkout') }}" method="POST">
            <h3>Thông tin thanh toán</h3>
            <label for="name">Họ và tên:</label>
            <input type="text" id="name" name="name" required>

            <label for="address">Địa chỉ:</label>
            <input type="text" id="address" name="address" required>

            <label for="phone">Số điện thoại:</label>
            <input type="text" id="phone" name="phone" required>

            <label for="payment_method">Phương thức thanh toán:</label>
            <select id="payment_method" name="payment_method" required>
                <option value="online">Thanh toán online</option>
                <option value="offline">Thanh toán khi nhận hàng</option>
            </select>

            <h3>Giỏ hàng của bạn</h3>
            <table>
                <thead>
                    <tr>
                        <th>Ảnh</th>
                        <th>Sản Phẩm</th>
                        <th>Số Lượng</th>
                        <th>Giá</th>
                        <th>Tổng</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in cart %}
                        <tr>
                            <td><img src="{{ url_for('static', filename='images/' + item.get('image', 'default.jpg')) }}" alt="{{ item.get('title', 'No Title') }}" class="thumbnail"></td>
                            <td>{{ item.title }}</td>
                            <td>{{ item.quantity }}</td>
                            <td>{{ item.price }}</td>
                            <td>{{ item.price * item.quantity }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
            <div class="total">
                <strong>Tổng cộng: {{ total }}</strong>
            </div>
            <button type="submit" class="btn btn-primary">Xác nhận thanh toán</button>
        </form>
    {% else %}
        <p>Giỏ hàng của bạn trống.</p>
    {% endif %}
</div>
{% endblock %}
